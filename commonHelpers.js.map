{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["const params = new URLSearchParams({\n  'Content-Type': 'application/json',\n  'x-api-key':\n    'live_o0DjDhD9sQJ8vSBYerclRajz3qjShq8uQvqFj4h0k2iq6Aj7uknNu1uxnQrOZVNB',\n});\n\nexport function fetchBreeds() {\n  return fetch('https://api.thecatapi.com/v1/breeds', params).then(res => {\n    if (!res.ok) throw new Error(response.statusText);\n\n    return res.json();\n  });\n}\n\nexport function fetchCatByBreed(breedId) {\n  return fetch(\n    `https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`,\n    params\n  ).then(res => {\n    if (!res.ok) throw new Error(response.statusText);\n\n    return res.json();\n  });\n}\n","import { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n  catInfo: document.querySelector('.cat-info'),\n};\n\nfunction createSelectMarkup(arr) {\n  return arr.map(el => `<option value=\"${el.id}\">${el.name}</option>`).join('');\n}\n\nfunction createMainMarkup({\n  name,\n  weight: { imperial },\n  intelligence,\n  description,\n  url,\n}) {\n  return `<div class=\"card\">\n            <h2>Name: ${name}</h2>\n            <p>Weight: ${imperial} kg</p>\n            <p>Intelligence: ${intelligence}</p>\n            <p>${description}</p>\n            <img src=\"${url}\" width=400 />\n        </div>`;\n}\n\nfunction onSelectChange(e) {\n  const value = e.currentTarget.value;\n\n  refs.loader.classList.remove('hidden');\n  refs.catInfo.classList.add('hidden');\n  refs.error.classList.add('hidden');\n\n  fetchCatByBreed(value)\n    .then(res => {\n      const cat = JSON.parse(localStorage.getItem('breeds')).find(\n        el => el.id === value\n      );\n\n      refs.catInfo.innerHTML = createMainMarkup({\n        ...cat,\n        url: res[0].url,\n      });\n\n      refs.catInfo.classList.remove('hidden');\n    })\n    .catch(() => refs.error.classList.remove('hidden'))\n    .finally(() => refs.loader.classList.add('hidden'));\n}\n\nfetchBreeds()\n  .then(res => {\n    localStorage.setItem('breeds', JSON.stringify(res));\n\n    refs.select.innerHTML = createSelectMarkup(res);\n    refs.select.classList.remove('hidden');\n  })\n  .catch(() => refs.error.classList.remove('hidden'))\n  .finally(() => refs.loader.classList.add('hidden'));\n\nrefs.select.addEventListener('change', onSelectChange);\n"],"names":["params","fetchBreeds","res","fetchCatByBreed","breedId","refs","createSelectMarkup","arr","el","createMainMarkup","name","imperial","intelligence","description","url","onSelectChange","e","value","cat"],"mappings":"ssBAAA,MAAMA,EAAS,IAAI,gBAAgB,CACjC,eAAgB,mBAChB,YACE,uEACJ,CAAC,EAEM,SAASC,GAAc,CAC5B,OAAO,MAAM,sCAAuCD,CAAM,EAAE,KAAKE,GAAO,CACtE,GAAI,CAACA,EAAI,GAAI,MAAM,IAAI,MAAM,SAAS,UAAU,EAEhD,OAAOA,EAAI,MACf,CAAG,CACH,CAEO,SAASC,EAAgBC,EAAS,CACvC,OAAO,MACL,wDAAwDA,CAAO,GAC/DJ,CACJ,EAAI,KAAKE,GAAO,CACZ,GAAI,CAACA,EAAI,GAAI,MAAM,IAAI,MAAM,SAAS,UAAU,EAEhD,OAAOA,EAAI,MACf,CAAG,CACH,CCrBA,MAAMG,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,EACtC,QAAS,SAAS,cAAc,WAAW,CAC7C,EAEA,SAASC,EAAmBC,EAAK,CAC/B,OAAOA,EAAI,IAAIC,GAAM,kBAAkBA,EAAG,EAAE,KAAKA,EAAG,IAAI,WAAW,EAAE,KAAK,EAAE,CAC9E,CAEA,SAASC,EAAiB,CACxB,KAAAC,EACA,OAAQ,CAAE,SAAAC,CAAU,EACpB,aAAAC,EACA,YAAAC,EACA,IAAAC,CACF,EAAG,CACD,MAAO;AAAA,wBACeJ,CAAI;AAAA,yBACHC,CAAQ;AAAA,+BACFC,CAAY;AAAA,iBAC1BC,CAAW;AAAA,wBACJC,CAAG;AAAA,eAE3B,CAEA,SAASC,EAAeC,EAAG,CACzB,MAAMC,EAAQD,EAAE,cAAc,MAE9BX,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrCA,EAAK,QAAQ,UAAU,IAAI,QAAQ,EACnCA,EAAK,MAAM,UAAU,IAAI,QAAQ,EAEjCF,EAAgBc,CAAK,EAClB,KAAKf,GAAO,CACX,MAAMgB,EAAM,KAAK,MAAM,aAAa,QAAQ,QAAQ,CAAC,EAAE,KACrDV,GAAMA,EAAG,KAAOS,CACxB,EAEMZ,EAAK,QAAQ,UAAYI,EAAiB,CACxC,GAAGS,EACH,IAAKhB,EAAI,CAAC,EAAE,GACpB,CAAO,EAEDG,EAAK,QAAQ,UAAU,OAAO,QAAQ,CAC5C,CAAK,EACA,MAAM,IAAMA,EAAK,MAAM,UAAU,OAAO,QAAQ,CAAC,EACjD,QAAQ,IAAMA,EAAK,OAAO,UAAU,IAAI,QAAQ,CAAC,CACtD,CAEAJ,EAAa,EACV,KAAKC,GAAO,CACX,aAAa,QAAQ,SAAU,KAAK,UAAUA,CAAG,CAAC,EAElDG,EAAK,OAAO,UAAYC,EAAmBJ,CAAG,EAC9CG,EAAK,OAAO,UAAU,OAAO,QAAQ,CACzC,CAAG,EACA,MAAM,IAAMA,EAAK,MAAM,UAAU,OAAO,QAAQ,CAAC,EACjD,QAAQ,IAAMA,EAAK,OAAO,UAAU,IAAI,QAAQ,CAAC,EAEpDA,EAAK,OAAO,iBAAiB,SAAUU,CAAc"}